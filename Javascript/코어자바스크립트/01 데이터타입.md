# 01 데이터타입

## 1-1 데이터 타입의 종류

![image](https://user-images.githubusercontent.com/60650518/152772103-ae5bcc0d-0d94-4836-9b5d-8f88612054c6.png)

기본형: 값이 담김 주솟값을 바로 복제한다, 불변성을 띈다

참조형: 값이 담긴 주솟값들로 이루어진 묶음을 가리키는 주솟값을 복제한다

## 1-2 데이터 타입에 관한 배경지식

### 1-2-1 메모리와 데이터

> 모든 데이터는 바이트 단위의 식별자, 더 정확하게는 메모리 주솟값을 통해 서로를 구분하고 연결할 수 있다.

컴퓨터는 **모든 데이터를 0 또는 1**로 바꿔 기억한다. 하나의 메모리 조각을 **비트**라고 하고, 메모리는 매우 많은 비트들로 구성돼 있는데 각 비트는 고유한 식별자를 통해 위치를 확인할 수 있다. 

매우 많은 비트를 한 단위로 묶으면 검색 시간은 줄일 수도 있고 표현할 수 있는 데이터의 개수도 늘어나겠지만 동시에 낭비되는 비트가 생기기도 한다. 이런 고민의 결과로 **바이트**라는 단위가 생겼다. 1바이트는 8비트로 구성돼 있다. 1비트마다 0 또는 1의 두가지 값을 표현할 수 있으므로 1바이트는 총 256(2**8)개의 값을 표현할 수 있다.

각 비트는 고유한 식별자를 지닌다. 바이트 역시 시작하는 비트의 식별자로 위치를 파악할 수 있다.

### 1-2-2 식별자와 변수

변수는 **변할 수 있는 수**이고 식별자는 어떤 데이터를 식별하는 데 사용하는 이름, 즉 **변수명**이다. 

## 1-3 변수 선언과 데이터 할당

### 1-3-1 변수 선언

```js
var a;
```

변할 수 있는 데이터를 만든다. 이 데이터의 식별자는 a로 한다.

변수란 변경 가능한 데이터가 담길 수 있는 공간 또는 그릇이다.

### 1-3-2 데이터 할당

```js
var a;  // 변수 a 선언
a = 'abc'; // 변수 a에 데이터 할당

var a = 'abc'; // 변수 선언과 할당을 한 문장으로 표현
```

| 주소(변수영역)   | ...  | 1002 | 1003                   | 1004  | 1005 | ...  |
| ---------------- | ---- | ---- | ---------------------- | ----- | ---- | ---- |
| 데이터           |      |      | 이름: a<br />값: @5004 |       |      |      |
| 주소(데이터영역) | ...  | 5002 | 5003                   | 5004  | 5005 | ...  |
| 데이터           |      |      |                        | 'abc' |      |      |

변수 영역에 값을 직접 대입하지 않고 굳이 번거롭게 한 단계를 거치는 이유는 데이터 변환을 자유롭게 할 수 있게 함과 동시에 메모리를 더욱 효율적으로 관리하기 위함이다.

## 1-4 기본형 데이터와 참조형 데이터

### 1-4-1 불변값

변수와 상수를 구분하는 성질은 '**변수 영역**메모리의 변경 가능성' 이다.

불변성 여부를 구분하는 성질은 '**데이터 영역**메모리의 변경 가능성' 이다.

기본형 데이터는 모두 불변값이다. 

### 1-4-2 가변값

참조형 데이터의 기본적인 성질은 가변값인 경우가 많지만 설정에 따라 변경 불가능한 경우도 있고, 아예 불변값으로 활용하는 방안도 있다.

| 주소(변수영역)   | 1001      | 1002                      | 1003 | 1004  | ...  |
| ---------------- | --------- | ------------------------- | ---- | ----- | ---- |
| 데이터           |           | 이름: obj1<br />값: @5001 |      |       |      |
| 주소(데이터영역) | 5001      | 5002                      | 5003 | 5004  | ...  |
| 데이터           | @7103 ~ ? |                           | 1    | 'bbb' |      |

| 주소(객체 @5001의 변수영역) | 7103                   | 7104                   | 7105 | 7106 | ...  |
| --------------------------- | ---------------------- | ---------------------- | ---- | ---- | ---- |
| 데이터                      | 이름: a<br />값: @5003 | 이름: b<br />값: @5004 |      |      |      |

기본형 데이터와의 차이는 **'객체의 변수(프로퍼티) 영역'이 별도로 존재**한다는 점이다.

### 1-4-3 변수 복사 비교

보통 기본형은 값을 복사하고 참조형은 주솟값을 복사한다고 하지만 사실 엄밀히 따지면 자바스크립트의 모든 데이터 타입은 참조형일 수 밖에 없다.

다만 기본형은 주솟값을 복사하는 과정이 한 번만 이뤄지고 참조형은 한 단계를 더 거친다는 차이가 있다.

## 1-5 불변 객체

> 값으로 전달받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우에 불변객체가 필요하다. 

### 1-5-1 불변 객체를 만드는 간단한 방법

참조형도 기본형과 마찬가지로 새로운 데이터를 할당하고자 할 때 기존 데이터는 변하지 않는다. 내부 프로퍼티를 변경할 필요가 있을 때마다 매번 새로운 객체를 만들어 재할당하기로 규칙을 정하거나 자동으로 새로운 객체를 만드는 도구를 활용하면 객체 역시 불변성을 확보할 수 있다.

### 1-5-2 얕은 복사와 깊은 복사

얕은 복사는 바로 아래 단계의 값만 복사하는 방법이고, 깊은 복사는 내부의 모든 값들을 하나하나 찾아서 전부 복사하는 방법이다.

중첩된 객체에서 참조형 데이터가 저장된 프로퍼티를 복사할 때 그 주솟값만 복사한다는 의미이다. 그러면 해당 프로퍼티에 대해 원본과 사본이 모두 동일한 참조형 데이터의 주소를 가리키게 된다. 사본을 바꾸면 원본도 바뀌고, 원본을 바꾸면 사본도 바뀐다.

어떤 객체를 복사할 때 객체 내부의 모든 값을 복사해서 완전히 새로운 데이터를 만들고자 할 때, 객체의 프로퍼티 중에서 그 값이 **기본형 데이터일 경우에는 그대로 복사**하면 되지만 **참조형 데이터는 다시 그 내부의 프로퍼티들을 복사**해야 한다.

```js
// 얕은 복사
// result 객체에 target 객체의 프로퍼티들을 복사
var copyObj = function (tartget) {
    var result = {};
    for (var prop in target) {
        result[prop] = target[prop];
    }
    return result;
};

// 깊은 복사
var copyObjectDeep = function(target) {
    var result = {};
    if (typeof target === 'object' && target !== null){
        for (var prop in target) {
            result[prop] = copyObjectDeep(target[prop]);
        }  
    } else {
        reuslt = target;
    }
    return result;
};

// 결과
var obj = {
    a: 1,
    b: {
        c: null,
        d: [1, 2]
    }
};
var obj2 = copyObjectDeep(obj);
obj2.a = 3;
obj2.b.c = 4;
obj.b.d[1] = 3;

console.log(obj);  // {a: 1, b: {c: null, d: [1, 3]}}
console.log(obj2); // {a: 3, b: {c:4, d: {0: 1, 1: 2}}}
```

## 1-6 undefined와 null

> 자바스크립트에서 '없음'을 나타내는 값

undefined: 사용자가 명시적으로 지정할 수도 있지만 값이 존재하지 않을 때 자바스크립트 엔진이 자동으로 부여하는 경우도 있다.

직접 undefined를 할당하지 말자! 같은 의미를 가진 null이라는 값을 쓰자

이런 규칙을 따르는 한 undefined는 오직 '값을 대입하지 않은 변수에 접근하고자 할 때 자바스크립트 엔진이 반환해주는 값'으로서만 존재할 수 있다.



